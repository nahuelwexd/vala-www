<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
    <title>Vala Programming Language</title>
    <subtitle>Vala is an object-oriented programming language with a self-hosting compiler that generates C code and uses the GObject type system.</subtitle>
    <link rel="self" type="application/atom+xml" href="https://vala.dev/atom.xml"/>
    <link rel="alternate" type="text/html" href="https://vala.dev"/>
    <generator uri="https://www.getzola.org/">Zola</generator>
    <updated>2024-05-09T00:00:00+00:00</updated>
    <id>https://vala.dev/atom.xml</id>
    <entry xml:lang="en">
        <title>ValaBot: an AI coding assistant fine-tuned for Vala</title>
        <published>2024-05-09T00:00:00+00:00</published>
        <updated>2024-05-09T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://vala.dev/blog/valabot/"/>
        <id>https://vala.dev/blog/valabot/</id>
        
        <content type="html" xml:base="https://vala.dev/blog/valabot/">&lt;h2 id=&quot;enhancing-ai-coding-assistants-for-vala-developers&quot;&gt;Enhancing AI Coding Assistants for Vala Developers&lt;a class=&quot;zola-anchor&quot; href=&quot;#enhancing-ai-coding-assistants-for-vala-developers&quot; aria-label=&quot;Anchor link for: enhancing-ai-coding-assistants-for-vala-developers&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;As a programmer, I&#x27;ve been impressed by AI coding assistants like GitHub Copilot and Codeium, which have significantly boosted my productivity. These tools excel at reducing disruptive interruptions, saving time on typing, and often completing lines of code accurately. However, I&#x27;ve encountered limitations with Copilot while working with the Vala programming language. Its suggestions often get muddled with similar languages like Java and C#, and it lacks training on the more common Vala libraries.&lt;&#x2F;p&gt;
&lt;p&gt;Like many other developers, I&#x27;m also dissatisfied with the dominance of Github Copilot and that open source code has been monetized without attribution or consideration for the original authors (some of whom now pay for the service).&lt;&#x2F;p&gt;
&lt;p&gt;This challenge inspired me to enhance the Copilot concept by creating an AI coding assistant that is finely tuned to provide a viable and superior alternative that caters for the specific needs of Vala developers. I began with an open-source Large Language Model that had been trained on source code - the powerful Deepseek Coder 6.7b model. This model has been trained from scratch by Deepseek AI on 2 trillion tokens sourced from GitHub. Deepseek Coder significantly outperforms other open-source coding models, such as Codellama.&lt;&#x2F;p&gt;
&lt;p&gt;I chose the Deepseekcoder-6.7b-base model as the foundation for fine-tuning because of its great benchmark performance and also because it was trained on Java and C# – languages syntactically close to Vala. This allowed me to build upon its existing capabilities and adapt it to the specific needs of Vala.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;fine-tuning-for-vala&quot;&gt;Fine-Tuning for Vala&lt;a class=&quot;zola-anchor&quot; href=&quot;#fine-tuning-for-vala&quot; aria-label=&quot;Anchor link for: fine-tuning-for-vala&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;I fine-tuned the model on Vala programming language datasets. This involved downloading as many Vala projects as I could find from GitHub, extracting the Vala source files, and splitting them into ~40 line segments. I then used Llama3 to create logical and predictable &quot;holes&quot; in each segment, which were then used to create the FIM (fill-in-the-middle) dataset. This data preparation process took 96 hours of GPU time using my quad-RX6800 machine over a weekend. The resulting dataset was cleaned to remove non-code elements, such as license headers, and personal identifiable information.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;the-training&quot;&gt;The Training&lt;a class=&quot;zola-anchor&quot; href=&quot;#the-training&quot; aria-label=&quot;Anchor link for: the-training&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;The fine-tuning process took 10 hours on an RTX 3090. The result was a LoRA, which was merged back into the base model, converted to GGUF, and quantized to q8_0, which is the format required by TabbyML.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;the-result&quot;&gt;The Result&lt;a class=&quot;zola-anchor&quot; href=&quot;#the-result&quot; aria-label=&quot;Anchor link for: the-result&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;The outcome was a model that is more helpful and productive for Vala-related projects. By fine-tuning Deepseek Coder, I was able to create a more accurate and effective AI coding assistant that understands the nuances of the Vala programming language. The model is hosted on Huggingface (&lt;a href=&quot;https:&#x2F;&#x2F;huggingface.co&#x2F;scowen&#x2F;deepseek-coder-6.7b-vala&#x2F;tree&#x2F;main&quot;&gt;https:&#x2F;&#x2F;huggingface.co&#x2F;scowen&#x2F;deepseek-coder-6.7b-vala&#x2F;tree&#x2F;main&lt;&#x2F;a&gt;). It can be used in VSCode, VIM, and other popular IDEs with TabbyML. The complete instructions, training scripts, and dataset are available on GitHub (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;supercamel&#x2F;ValaBot&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;supercamel&#x2F;ValaBot&lt;&#x2F;a&gt;).&lt;&#x2F;p&gt;
&lt;h2 id=&quot;licensing-and-fair-use&quot;&gt;Licensing and Fair Use&lt;a class=&quot;zola-anchor&quot; href=&quot;#licensing-and-fair-use&quot; aria-label=&quot;Anchor link for: licensing-and-fair-use&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;As a project rooted in the principles of Free and Open-Source Software (FOSS), I believe in promoting freedom, community, and sharing knowledge. To facilitate collaboration and innovation, I&#x27;ve made the following resources publicly available:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;The fine-tuned model weights are hosted on Hugging Face for anyone to access and utilize in a TabbyML or other deployment.&lt;&#x2F;li&gt;
&lt;li&gt;The training scripts and dataset preparation process are open-sourced on GitHub, providing a transparent and reproducible framework for others to build upon.&lt;&#x2F;li&gt;
&lt;li&gt;A comprehensive list of repositories used during the fine-tuning process is available on GitHub, ensuring that contributors and users can easily identify and explore the sources that made this project possible.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;I hope that this openness will pave the way for further advancements and refinements, ultimately benefiting the Vala developer community as a whole.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;a class=&quot;zola-anchor&quot; href=&quot;#conclusion&quot; aria-label=&quot;Anchor link for: conclusion&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;In this blog post, I&#x27;ve shared my experience with fine-tuning the Deepseek Coder for the Vala programming language, demonstrating how targeted adjustments can significantly enhance AI coding assistants. This project is just the beginning. I aim to continue developing models specifically optimized for Vala to support the Vala developer community. With the release of new base models, such as CodeQwen 7B, there are exciting possibilities for further advancements. Through this work, I hope to highlight the potential of AI fine-tuning in creating more effective coding assistants and inspire others to explore the possibilities of AI-assisted coding.&lt;&#x2F;p&gt;
&lt;p&gt;Get started with ValaBot here: &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;supercamel&#x2F;ValaBot&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;supercamel&#x2F;ValaBot&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Vala: the smoothest C off-ramp</title>
        <published>2024-04-22T00:00:00+00:00</published>
        <updated>2024-04-22T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://vala.dev/blog/c-off-ramp/"/>
        <id>https://vala.dev/blog/c-off-ramp/</id>
        
        <content type="html" xml:base="https://vala.dev/blog/c-off-ramp/">&lt;p&gt;Hi! I’m Reuben, a long-time free software maintainer and author. One of my specialities is taking on mature projects from their original authors and maintaining them long-term.&lt;&#x2F;p&gt;
&lt;p&gt;In this post, I want to talk about how I’ve rewritten entire projects in Vala, to make them easier, more productive and more fun to maintain.&lt;&#x2F;p&gt;
&lt;p&gt;Vala works well with C—that’s one of its primary features and design choices. But these abilities can be used for another purpose: to provide a “smooth off-ramp” for C, converting old code step-by-step to more-maintainable Vala, without an “all or nothing” rewrite, and with the ability to reimplement C libraries in Vala, so that existing C code can still call them.&lt;&#x2F;p&gt;
&lt;p&gt;Over the few years, I have rewritten two small–to–medium-sized C
code bases in Vala: the minimal Emacs clone &lt;a href=&quot;https:&#x2F;&#x2F;www.gnu.org&#x2F;software&#x2F;zile&quot;&gt;GNU Zile&lt;&#x2F;a&gt; and the spell-checking meta-library &lt;a href=&quot;https:&#x2F;&#x2F;abiword.github.io&#x2F;enchant&#x2F;&quot;&gt;Enchant&lt;&#x2F;a&gt;, which has been used by GNOME for years, most recently by &lt;a href=&quot;https:&#x2F;&#x2F;gitlab.gnome.org&#x2F;GNOME&#x2F;libspelling&quot;&gt;libspelling&lt;&#x2F;a&gt;, which provides spell-checking in the &lt;a href=&quot;https:&#x2F;&#x2F;apps.gnome.org&#x2F;TextEditor&#x2F;&quot;&gt;GNOME Text Editor&lt;&#x2F;a&gt;. In the rest of this post, I’ll focus on the challenges I faced doing these rewrites, how Vala helped me, and discuss whether such a drastic move (of rewriting entire code bases) was in fact a good idea.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;vala-is-good-at-talking-to-c&quot;&gt;Vala is good at talking to C&lt;a class=&quot;zola-anchor&quot; href=&quot;#vala-is-good-at-talking-to-c&quot; aria-label=&quot;Anchor link for: vala-is-good-at-talking-to-c&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;Vala is designed to work well with C, and a nice consequence of this is that often one doesn’t have to think about C at all, because so many useful libraries are already conveniently bound to Vala “out of the box”. It’s impressive the degree to which some of Vala’s basic abilities, such as its “built-in” container types are “just” clever binding of GLib functions plus some syntactic sugar.&lt;&#x2F;p&gt;
&lt;p&gt;But Vala’s binding abilities are very powerful: it’s not just GLib and GObject APIs that it can bind successfully; it can bind almost any C API. Later I will also show some examples that test its limits.&lt;&#x2F;p&gt;
&lt;p&gt;Further, Vala can &lt;em&gt;implement&lt;&#x2F;em&gt; C APIs just as well as it can &lt;em&gt;consume&lt;&#x2F;em&gt; them.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;allowing-c-to-talk-back&quot;&gt;Allowing C to talk back&lt;a class=&quot;zola-anchor&quot; href=&quot;#allowing-c-to-talk-back&quot; aria-label=&quot;Anchor link for: allowing-c-to-talk-back&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;Why would you want to implement C APIs in Vala? I have three answers for you. Firstly, maintaining a typical C code-base is a horrible experience. I just wanted to not have more memory management errors, especially to do with strings (which both Zile and Enchant are big on). It’s so easy to corrupt memory, to get lifetimes wrong, or simply get the wrong answer with C’s primitive string manipulation routines.&lt;&#x2F;p&gt;
&lt;p&gt;Secondly, implementing an existing C API in Vala gives an easier-to-maintain codebase that can be used by existing consumers, which don’t need to be C programs: they can be written in Python, Rust, JavaScript or, of course, Vala!&lt;&#x2F;p&gt;
&lt;p&gt;Thirdly, and perhaps less obviously, you can use this ability to rewrite a C program in Vala incrementally, one module (say) at a time. The result is a pure Vala application (no C APIs are being implemented), but at each step one has a complete working application, partly written in C and partly in Vala; and where C needs to call Vala, the Vala code must implement the right C APIs.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;before-we-start-a-sanity-check&quot;&gt;Before we start, a sanity check&lt;a class=&quot;zola-anchor&quot; href=&quot;#before-we-start-a-sanity-check&quot; aria-label=&quot;Anchor link for: before-we-start-a-sanity-check&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;I’m talking about rewriting mature code-bases. Zile dates from the late 1990s, and I rewrote it into Vala in 2020. Enchant was written starting around 2003, and I rewrote it in Vala this week (in 2024). So:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Isn’t that an awful lot of work?&lt;&#x2F;li&gt;
&lt;li&gt;Won’t it introduce lots of new bugs?&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;In other words, is it worth it? Or am I just being quixotic?&lt;&#x2F;p&gt;
&lt;h2 id=&quot;it-s-not-that-hard&quot;&gt;It’s not that hard&lt;a class=&quot;zola-anchor&quot; href=&quot;#it-s-not-that-hard&quot; aria-label=&quot;Anchor link for: it-s-not-that-hard&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;As I said above, I rewrote Enchant in Vala this week. Actually, that’s not quite true: I rewrote the core, about 2,000 lines of C. Enchant is, as I said above, a meta-library: that is, it doesn’t do spell-checking itself, but delegates to a number of libraries that do. Each one needs an adaptor plugin, which Enchant calls a “provider”, and these providers are written in C, C++ and even Objective C. I haven’t touched those (yet!).&lt;&#x2F;p&gt;
&lt;p&gt;But still, 2,000 lines of code in a week is not bad.&lt;&#x2F;p&gt;
&lt;p&gt;GNU Zile was about 8,000 lines of C, and that took me about a month.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;avoiding-a-plague-of-new-bugs&quot;&gt;Avoiding a plague of new bugs&lt;a class=&quot;zola-anchor&quot; href=&quot;#avoiding-a-plague-of-new-bugs&quot; aria-label=&quot;Anchor link for: avoiding-a-plague-of-new-bugs&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;vala-is-well-matched-to-c&quot;&gt;Vala is well matched to C&lt;a class=&quot;zola-anchor&quot; href=&quot;#vala-is-well-matched-to-c&quot; aria-label=&quot;Anchor link for: vala-is-well-matched-to-c&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h3&gt;
&lt;p&gt;Any time you touch code you can introduce bugs, of course: the slightest adjustment can be risky. How much more so rewriting in another language?&lt;&#x2F;p&gt;
&lt;p&gt;The good news here is that because Vala is so close to C, it is relatively easy to translate code without introducing new bugs. The syntax is sufficiently similar that code can be easily translated with some search and replace (e.g. &lt;code&gt;NULL&lt;&#x2F;code&gt; in C becomes &lt;code&gt;null&lt;&#x2F;code&gt; in Vala) plus light editing (e.g. adding missing comparisons in conditions to make them boolean, so that &lt;code&gt;if (ptr)&lt;&#x2F;code&gt; in C becomes &lt;code&gt;if (ptr != null)&lt;&#x2F;code&gt; in Vala). C APIs can be used directly via Vala bindings, and C data structures can be replicated precisely. Vala’s static typing also helps.&lt;&#x2F;p&gt;
&lt;p&gt;Here’s an example of a struct in C from Zile:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;c&quot; class=&quot;language-c z-code&quot;&gt;&lt;code class=&quot;language-c&quot; data-lang=&quot;c&quot;&gt;&lt;span class=&quot;z-source z-c&quot;&gt;&lt;span class=&quot;z-meta z-struct z-c&quot;&gt;&lt;span class=&quot;z-storage z-type z-c&quot;&gt;struct&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-struct z-c&quot;&gt;&lt;span class=&quot;z-entity z-name z-struct z-c&quot;&gt;Region&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-struct z-c&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c&quot;&gt;&lt;span class=&quot;z-meta z-struct z-c&quot;&gt;&lt;span class=&quot;z-meta z-block z-c&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-c&quot;&gt;{&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-struct z-c&quot;&gt;&lt;span class=&quot;z-meta z-block z-c&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c&quot;&gt;&lt;span class=&quot;z-meta z-struct z-c&quot;&gt;&lt;span class=&quot;z-meta z-block z-c&quot;&gt;&lt;span class=&quot;z-meta z-preprocessor z-macro z-c&quot;&gt;&lt;span class=&quot;z-keyword z-control z-import z-define z-c&quot;&gt;#define&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-preprocessor z-macro z-c&quot;&gt; &lt;span class=&quot;z-entity z-name z-function z-preprocessor z-c&quot;&gt;FIELD&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-preprocessor z-macro z-parameters z-c&quot;&gt;&lt;span class=&quot;z-meta z-group z-c&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-c&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-c&quot;&gt;ty&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-c&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-c&quot;&gt;name&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-c&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-preprocessor z-macro z-c&quot;&gt; ty name&lt;span class=&quot;z-punctuation z-terminator z-c&quot;&gt;;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c&quot;&gt;&lt;span class=&quot;z-meta z-struct z-c&quot;&gt;&lt;span class=&quot;z-meta z-block z-c&quot;&gt;&lt;span class=&quot;z-meta z-preprocessor z-include z-c&quot;&gt;&lt;span class=&quot;z-keyword z-control z-import z-include z-c&quot;&gt;#include&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-include z-c&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-c&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;region.h&lt;span class=&quot;z-punctuation z-definition z-string z-end z-c&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c&quot;&gt;&lt;span class=&quot;z-meta z-struct z-c&quot;&gt;&lt;span class=&quot;z-meta z-block z-c&quot;&gt;&lt;span class=&quot;z-meta z-preprocessor z-c&quot;&gt;&lt;span class=&quot;z-keyword z-control z-import z-c&quot;&gt;#undef&lt;&#x2F;span&gt; FIELD
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c&quot;&gt;&lt;span class=&quot;z-meta z-struct z-c&quot;&gt;&lt;span class=&quot;z-meta z-block z-c&quot;&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-struct z-c&quot;&gt;&lt;span class=&quot;z-meta z-block z-c&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-c&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-c&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c&quot;&gt;&lt;span class=&quot;z-meta z-preprocessor z-macro z-c&quot;&gt;&lt;span class=&quot;z-keyword z-control z-import z-define z-c&quot;&gt;#define&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-preprocessor z-macro z-c&quot;&gt; &lt;span class=&quot;z-entity z-name z-function z-preprocessor z-c&quot;&gt;FIELD&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-preprocessor z-macro z-parameters z-c&quot;&gt;&lt;span class=&quot;z-meta z-group z-c&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-c&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-parameter z-c&quot;&gt;ty&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-c&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-c&quot;&gt;field&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-c&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-preprocessor z-macro z-c&quot;&gt;                  &lt;span class=&quot;z-punctuation z-separator z-continuation z-c&quot;&gt;\&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c&quot;&gt;&lt;span class=&quot;z-meta z-preprocessor z-macro z-c&quot;&gt;  &lt;span class=&quot;z-meta z-function-call z-c&quot;&gt;&lt;span class=&quot;z-variable z-function z-c&quot;&gt;GETTER&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-c&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-c&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-c&quot;&gt;&lt;span class=&quot;z-meta z-group z-c&quot;&gt;Region&lt;span class=&quot;z-punctuation z-separator z-c&quot;&gt;,&lt;&#x2F;span&gt; region&lt;span class=&quot;z-punctuation z-separator z-c&quot;&gt;,&lt;&#x2F;span&gt; ty&lt;span class=&quot;z-punctuation z-separator z-c&quot;&gt;,&lt;&#x2F;span&gt; field&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-c&quot;&gt;&lt;span class=&quot;z-meta z-group z-c&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-c&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;      &lt;span class=&quot;z-punctuation z-separator z-continuation z-c&quot;&gt;\&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c&quot;&gt;&lt;span class=&quot;z-meta z-preprocessor z-macro z-c&quot;&gt;&lt;span class=&quot;z-meta z-assumed-macro z-c&quot;&gt;  &lt;span class=&quot;z-variable z-function z-assumed-macro z-c&quot;&gt;SETTER&lt;&#x2F;span&gt; &lt;span class=&quot;z-punctuation z-section z-group z-begin z-c&quot;&gt;(&lt;&#x2F;span&gt;Region&lt;span class=&quot;z-punctuation z-separator z-c&quot;&gt;,&lt;&#x2F;span&gt; region&lt;span class=&quot;z-punctuation z-separator z-c&quot;&gt;,&lt;&#x2F;span&gt; ty&lt;span class=&quot;z-punctuation z-separator z-c&quot;&gt;,&lt;&#x2F;span&gt; field&lt;span class=&quot;z-punctuation z-section z-group z-end z-c&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c&quot;&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c&quot;&gt;&lt;span class=&quot;z-meta z-preprocessor z-include z-c&quot;&gt;&lt;span class=&quot;z-keyword z-control z-import z-include z-c&quot;&gt;#include&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-include z-c&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-c&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;region.h&lt;span class=&quot;z-punctuation z-definition z-string z-end z-c&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c&quot;&gt;&lt;span class=&quot;z-meta z-preprocessor z-c&quot;&gt;&lt;span class=&quot;z-keyword z-control z-import z-c&quot;&gt;#undef&lt;&#x2F;span&gt; FIELD
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The file &lt;code&gt;region.h&lt;&#x2F;code&gt; contained:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;c&quot; class=&quot;language-c z-code&quot;&gt;&lt;code class=&quot;language-c&quot; data-lang=&quot;c&quot;&gt;&lt;span class=&quot;z-source z-c&quot;&gt;&lt;span class=&quot;z-meta z-assumed-macro z-c&quot;&gt;&lt;span class=&quot;z-variable z-function z-assumed-macro z-c&quot;&gt;FIELD&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-c&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-type z-sys-types z-c&quot;&gt;size_t&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-c&quot;&gt;,&lt;&#x2F;span&gt; start&lt;span class=&quot;z-punctuation z-section z-group z-end z-c&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c&quot;&gt;&lt;span class=&quot;z-meta z-assumed-macro z-c&quot;&gt;&lt;span class=&quot;z-variable z-function z-assumed-macro z-c&quot;&gt;FIELD&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-c&quot;&gt;(&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-type z-sys-types z-c&quot;&gt;size_t&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-c&quot;&gt;,&lt;&#x2F;span&gt; end&lt;span class=&quot;z-punctuation z-section z-group z-end z-c&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Here’s the translation into Vala:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;vala&quot; class=&quot;language-vala z-code&quot;&gt;&lt;code class=&quot;language-vala&quot; data-lang=&quot;vala&quot;&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-storage z-modifier z-access z-vala&quot;&gt;public&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-class z-vala&quot;&gt;&lt;span class=&quot;z-storage z-type z-class z-vala&quot;&gt;class&lt;&#x2F;span&gt; &lt;span class=&quot;z-entity z-name z-class z-vala&quot;&gt;Region &lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-class z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-vala&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-class z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;    &lt;span class=&quot;z-storage z-modifier z-access z-vala&quot;&gt;public&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-vala&quot;&gt;size_t&lt;&#x2F;span&gt; &lt;span class=&quot;z-support z-type z-vala&quot;&gt;start&lt;&#x2F;span&gt; { &lt;span class=&quot;z-support z-type z-vala&quot;&gt;get&lt;&#x2F;span&gt;; &lt;span class=&quot;z-support z-type z-vala&quot;&gt;set&lt;&#x2F;span&gt;; }
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-class z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;    &lt;span class=&quot;z-storage z-modifier z-access z-vala&quot;&gt;public&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-vala&quot;&gt;size_t&lt;&#x2F;span&gt; &lt;span class=&quot;z-support z-type z-vala&quot;&gt;end&lt;&#x2F;span&gt; { &lt;span class=&quot;z-support z-type z-vala&quot;&gt;get&lt;&#x2F;span&gt;; &lt;span class=&quot;z-support z-type z-vala&quot;&gt;set&lt;&#x2F;span&gt;; }
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-class z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;    &lt;span class=&quot;z-comment z-line z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-vala&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; …methods go here
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-class z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Compare and contrast: around 2009, I translated Zile into &lt;a href=&quot;https:&#x2F;&#x2F;www.lua.org&quot;&gt;Lua&lt;&#x2F;a&gt;. I completed the translation, but I did not release it, as I found that Lua’s lack of static type-checking made it too easy to introduce new bugs. While I was translating it I was forever finding off-by-one errors caused by Lua counting arrays and string positions from 1, while C is 0-based (as is Vala, of course). Don’t get me wrong: Lua is a great language; indeed, I have successfully written other, smaller programs from C into Lua, though I wouldn’t now recommend that; its strengths lie elsewhere.&lt;&#x2F;p&gt;
&lt;p&gt;With Vala, I recommend making the initial translation as “light” as possible: don’t use lots of Vala’s features to rewrite code. Translate &lt;code&gt;char *&lt;&#x2F;code&gt; pointers to string offsets (that is, an integer string index). Make sure the translated code works first, then start simplifying. Even the “light” translation will contain simplifications, anyway: no more &lt;code&gt;malloc&lt;&#x2F;code&gt; or &lt;code&gt;free&lt;&#x2F;code&gt;, for example.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;you-already-have-a-test-suite-of-course&quot;&gt;You already have a test suite, of course&lt;a class=&quot;zola-anchor&quot; href=&quot;#you-already-have-a-test-suite-of-course&quot; aria-label=&quot;Anchor link for: you-already-have-a-test-suite-of-course&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h3&gt;
&lt;p&gt;The other way you avoid a plague of new bugs is with a good test suite. Sorry! There’s no way around that. If you want to alter, let alone completely rewrite code, you need to have tests.&lt;&#x2F;p&gt;
&lt;p&gt;Fortunately, I had already added a fairly extensive test suite to Zile years ago, when I was trying to make sure that it really behaved exactly like Emacs. The situation with Enchant was even better: it has an exhaustive (and sometimes exhausting) test suite that checks every aspect of its API, added a few years after Enchant was written, by a commission from &lt;a href=&quot;https:&#x2F;&#x2F;www.sil.org&quot;&gt;SIL International&lt;&#x2F;a&gt;. (A big shout-out to those who commission work on libre software, especially this sort of important under-the-hood work. These tests have saved me from introducing bugs time and time again.)&lt;&#x2F;p&gt;
&lt;p&gt;Again, you have to be disciplined: no turning off the tests, or changing them as you go. Complete the translation without changing them, as far as possible.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;your-existing-build-tool-is-probably-supported&quot;&gt;Your existing build tool is probably supported&lt;a class=&quot;zola-anchor&quot; href=&quot;#your-existing-build-tool-is-probably-supported&quot; aria-label=&quot;Anchor link for: your-existing-build-tool-is-probably-supported&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h3&gt;
&lt;p&gt;Many Vala projects these days are using the &lt;a href=&quot;https:&#x2F;&#x2F;mesonbuild.com&quot;&gt;Meson&lt;&#x2F;a&gt; build system, which is very popular in the GNOME space. But Vala is also supported well by older tools, such as &lt;a href=&quot;https:&#x2F;&#x2F;cmake.org&quot;&gt;CMake&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;GNU_Autotools&quot;&gt;GNU Autotools&lt;&#x2F;a&gt;. Both of the projects I translated were using GNU Autotools, and I stuck with it, for two main reasons:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;I use the excellent &lt;a href=&quot;https:&#x2F;&#x2F;www.gnu.org&#x2F;software&#x2F;gnulib&#x2F;&quot;&gt;gnulib&lt;&#x2F;a&gt; portability library to ensure that my POSIX-compliant code runs on most systems without problems. Unfortunately, gnulib is tied to GNU Autotools. But then, few build systems work on as many platforms as the Autotools in any case.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;www.gnu.org&#x2F;software&#x2F;automake&#x2F;&quot;&gt;Automake&lt;&#x2F;a&gt; not only has Vala support, but allows you to ship the generated C sources, so that users can build your code without a Vala compiler. This means that your translated project has exactly the same build dependencies as it had before, which can help with users and packagers who haven’t heard of Vala and don’t want to learn. With Zile, previously a pure-POSIX project, I added GLib as a build-time dependency, but of course that’s so widely used that it’s unlikely to be a problem. Enchant already used GLib.&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;h2 id=&quot;the-vala-experience&quot;&gt;The Vala experience&lt;a class=&quot;zola-anchor&quot; href=&quot;#the-vala-experience&quot; aria-label=&quot;Anchor link for: the-vala-experience&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;I will now describe the process of translating the two code-bases. Although they were a bit different (Zile an application, Enchant a library), and I made the translations a few years apart, I was pleasantly surprised to find the second time that the process was much the same as the first.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;add-vala-to-the-build-system&quot;&gt;Add Vala to the build system&lt;a class=&quot;zola-anchor&quot; href=&quot;#add-vala-to-the-build-system&quot; aria-label=&quot;Anchor link for: add-vala-to-the-build-system&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h3&gt;
&lt;p&gt;With Autotools, this is a matter of adding a couple of &lt;code&gt;configure.ac&lt;&#x2F;code&gt; lines to detect the Vala compiler and check for GNU Make (which is required to build from Vala sources), and then adding a test Vala source file to a &lt;code&gt;Makefile.am&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;translating-the-code&quot;&gt;Translating the code&lt;a class=&quot;zola-anchor&quot; href=&quot;#translating-the-code&quot; aria-label=&quot;Anchor link for: translating-the-code&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h3&gt;
&lt;p&gt;I typically translate one file at a time. The code will of course usually call functions from other parts of the program: I add a private VAPI file with suitable bindings. You can usefully pre-populate the VAPI file with the commented-out contents of relevant C header files, then just uncomment the APIs you need in Vala, and edit them suitably. The excellent &lt;a href=&quot;https:&#x2F;&#x2F;wiki.gnome.org&#x2F;Projects&#x2F;Vala&#x2F;ManualBindings&quot;&gt;Manual bindings&lt;&#x2F;a&gt; guide from the Wiki is my constant companion.&lt;&#x2F;p&gt;
&lt;p&gt;To translate a file, I copy &lt;code&gt;foo.c&lt;&#x2F;code&gt; to &lt;code&gt;foo_vala.vala&lt;&#x2F;code&gt;. (The &lt;code&gt;_vala&lt;&#x2F;code&gt; bit ensures that the Vala-generated C won’t overwrite the original file, which I will keep for reference.) I translate the code, possibly in multiple steps, commenting out the bits I have translated in &lt;code&gt;foo.c&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Compile, test, fix, rinse, repeat.&lt;&#x2F;p&gt;
&lt;p&gt;I find that I get a nice rhythm with my translation, of doing the obvious basic syntactic stuff, as mentioned above, then finding the equivalent Vala APIs where necessary, then tackling any hard bits, such as binding third-party APIs that Vala does not yet know about.&lt;&#x2F;p&gt;
&lt;p&gt;For Zile I leaned heavily on the POSIX VAPI, and added a new GNU VAPI for some GNU-specific APIs, which I have also used and extended while translating Enchant. Enchant was easier on the whole, because it was already GLib-based, so I just had to search &lt;a href=&quot;https:&#x2F;&#x2F;valadoc.org&quot;&gt;valadoc.org&lt;&#x2F;a&gt; for the Vala versions of the GLib APIs.&lt;&#x2F;p&gt;
&lt;p&gt;For Zile, I found &lt;a href=&quot;https:&#x2F;&#x2F;wiki.gnome.org&#x2F;Projects&#x2F;Libgee&quot;&gt;libgee&lt;&#x2F;a&gt; invaluable, with its superior collections that are both richer than GLib’s and allows extra use cases, such as collections of unboxed simple types (e.g. &lt;code&gt;ArrayList&amp;lt;int&amp;gt;&lt;&#x2F;code&gt;). For Enchant, it so happened I didn’t need this extra functionality; Enchant’s use of collections is mostly limited to singly-linked lists of objects and hash tables with string keys.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;stumbling-blocks&quot;&gt;Stumbling blocks…&lt;a class=&quot;zola-anchor&quot; href=&quot;#stumbling-blocks&quot; aria-label=&quot;Anchor link for: stumbling-blocks&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h3&gt;
&lt;h4 id=&quot;documentation-and-api-coverage&quot;&gt;Documentation and API coverage&lt;a class=&quot;zola-anchor&quot; href=&quot;#documentation-and-api-coverage&quot; aria-label=&quot;Anchor link for: documentation-and-api-coverage&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h4&gt;
&lt;p&gt;Vala is a small ecosystem, even after all these years. Hence, I found bugs, mostly in the documentation. I took the time to submit &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;vala-lang&#x2F;valadoc-org&#x2F;pull&#x2F;414&quot;&gt;fixes&lt;&#x2F;a&gt;, and this past week reaped the rewards! Some of these fixes went as far as GLib itself; many were to the Vala wiki. As I noted above, I also made additions to the VAPIs, in particular adding a complete binding for the POSIX, GNU and BSD regex APIs (Zile only needed the GNU API, but since the GNU regex module implements all three, I thought I might as well!), as well as &lt;code&gt;getopt_long()&lt;&#x2F;code&gt;. I added &lt;code&gt;freopen&lt;&#x2F;code&gt; to the POSIX VAPI (as &lt;code&gt;FILE.reopen()&lt;&#x2F;code&gt;), upgraded the curses VAPI to improve its Terminfo coverage and add key-codes for function keys, and added return codes to GLib’s &lt;code&gt;FileStream.putc&lt;&#x2F;code&gt; and &lt;code&gt;puts&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;I was also able to offer my old-school expertise to the Vala project itself: I converted the test suite to use Automake’s relatively recent ability to run tests in parallel.&lt;&#x2F;p&gt;
&lt;h4 id=&quot;falling-between-two-stools&quot;&gt;Falling between two stools&lt;a class=&quot;zola-anchor&quot; href=&quot;#falling-between-two-stools&quot; aria-label=&quot;Anchor link for: falling-between-two-stools&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h4&gt;
&lt;p&gt;Vala itself mostly insulates you from the memory-management woes that bedevil C, but mid-translation there is still C code, so you have to be careful if you want to keep a working program. It’s always tempting to just plough on with the translation and hope that crashes will disappear, but I try not to give in, as that can bury bugs deeper and make them harder to find later. So, expect to spend some time studying &lt;code&gt;valac&lt;&#x2F;code&gt;-generated C, and revising your knowledge of &lt;code&gt;owned&lt;&#x2F;code&gt; and other esoteric Vala features.&lt;&#x2F;p&gt;
&lt;p&gt;For me, this is particularly relevant to Enchant, as a C library whose API and ABI I want to maintain. I am happy to report that I have been mostly successful, and at the time of writing I am tracking down some problems with object lifetime management, but otherwise the Vala implementation seems to perfectly replicate the C.&lt;&#x2F;p&gt;
&lt;p&gt;Another area of awkwardness is strings: as I hinted above, C often uses pointers to refer to string positions, whereas in Vala it’s usual to use integer offsets. This code is fairly easy to convert once you get the hang of it. Since C &lt;em&gt;can&lt;&#x2F;em&gt; use offsets instead of pointers, you can always rewrite the code in two stages, first changing the C to use offsets, and then translating it into Vala.&lt;&#x2F;p&gt;
&lt;p&gt;Here’s an example of the translation from pointers in C to offsets in Vala. The C version refers to positions in strings with pointers:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;c&quot; class=&quot;language-c z-code&quot;&gt;&lt;code class=&quot;language-c&quot; data-lang=&quot;c&quot;&gt;&lt;span class=&quot;z-source z-c&quot;&gt;&lt;span class=&quot;z-storage z-type z-c&quot;&gt;char&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-c&quot;&gt;*&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function z-c&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-c&quot;&gt;enchant_iso_639_from_tag&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-c&quot;&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-c&quot;&gt;&lt;span class=&quot;z-meta z-group z-c&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-c&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-parameters z-c&quot;&gt;&lt;span class=&quot;z-meta z-group z-c&quot;&gt;&lt;span class=&quot;z-storage z-modifier z-c&quot;&gt;const&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-c&quot;&gt;char&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-c&quot;&gt;*&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-modifier z-c&quot;&gt;const&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-c&quot;&gt;dict_tag&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-c&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-c&quot;&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-c&quot;&gt;&lt;span class=&quot;z-meta z-block z-c&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-c&quot;&gt;{&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-c&quot;&gt;&lt;span class=&quot;z-meta z-block z-c&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c&quot;&gt;&lt;span class=&quot;z-meta z-function z-c&quot;&gt;&lt;span class=&quot;z-meta z-block z-c&quot;&gt;    &lt;span class=&quot;z-storage z-type z-c&quot;&gt;char&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-c&quot;&gt;*&lt;&#x2F;span&gt; new_tag &lt;span class=&quot;z-keyword z-operator z-assignment z-c&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-c&quot;&gt;&lt;span class=&quot;z-variable z-function z-c&quot;&gt;strdup&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-c&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-c&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-c&quot;&gt;&lt;span class=&quot;z-meta z-group z-c&quot;&gt;dict_tag&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-c&quot;&gt;&lt;span class=&quot;z-meta z-group z-c&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-c&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-c&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c&quot;&gt;&lt;span class=&quot;z-meta z-function z-c&quot;&gt;&lt;span class=&quot;z-meta z-block z-c&quot;&gt;    &lt;span class=&quot;z-keyword z-control z-c&quot;&gt;if&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-c&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-c&quot;&gt;(&lt;&#x2F;span&gt;new_tag &lt;span class=&quot;z-keyword z-operator z-comparison z-c&quot;&gt;==&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-c&quot;&gt;NULL&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-c&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c&quot;&gt;&lt;span class=&quot;z-meta z-function z-c&quot;&gt;&lt;span class=&quot;z-meta z-block z-c&quot;&gt;        &lt;span class=&quot;z-keyword z-control z-flow z-return z-c&quot;&gt;return&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-c&quot;&gt;NULL&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-c&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c&quot;&gt;&lt;span class=&quot;z-meta z-function z-c&quot;&gt;&lt;span class=&quot;z-meta z-block z-c&quot;&gt;    &lt;span class=&quot;z-storage z-type z-c&quot;&gt;char&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-c&quot;&gt;*&lt;&#x2F;span&gt; needle &lt;span class=&quot;z-keyword z-operator z-assignment z-c&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-c&quot;&gt;&lt;span class=&quot;z-support z-function z-C99 z-c&quot;&gt;strchr&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-c&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-c&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-c&quot;&gt;&lt;span class=&quot;z-meta z-group z-c&quot;&gt;new_tag&lt;span class=&quot;z-punctuation z-separator z-c&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-single z-c&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-c&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;_&lt;span class=&quot;z-punctuation z-definition z-string z-end z-c&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-c&quot;&gt;&lt;span class=&quot;z-meta z-group z-c&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-c&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-c&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c&quot;&gt;&lt;span class=&quot;z-meta z-function z-c&quot;&gt;&lt;span class=&quot;z-meta z-block z-c&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c&quot;&gt;&lt;span class=&quot;z-meta z-function z-c&quot;&gt;&lt;span class=&quot;z-meta z-block z-c&quot;&gt;    &lt;span class=&quot;z-keyword z-control z-c&quot;&gt;if&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-c&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-c&quot;&gt;(&lt;&#x2F;span&gt;needle &lt;span class=&quot;z-keyword z-operator z-comparison z-c&quot;&gt;!=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-c&quot;&gt;NULL&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-c&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c&quot;&gt;&lt;span class=&quot;z-meta z-function z-c&quot;&gt;&lt;span class=&quot;z-meta z-block z-c&quot;&gt;        &lt;span class=&quot;z-keyword z-operator z-c&quot;&gt;*&lt;&#x2F;span&gt;needle &lt;span class=&quot;z-keyword z-operator z-assignment z-c&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-single z-c&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-c&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-character z-escape z-c&quot;&gt;\0&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-c&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-c&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c&quot;&gt;&lt;span class=&quot;z-meta z-function z-c&quot;&gt;&lt;span class=&quot;z-meta z-block z-c&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c&quot;&gt;&lt;span class=&quot;z-meta z-function z-c&quot;&gt;&lt;span class=&quot;z-meta z-block z-c&quot;&gt;    &lt;span class=&quot;z-keyword z-control z-flow z-return z-c&quot;&gt;return&lt;&#x2F;span&gt; new_tag&lt;span class=&quot;z-punctuation z-terminator z-c&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-c&quot;&gt;&lt;span class=&quot;z-meta z-function z-c&quot;&gt;&lt;span class=&quot;z-meta z-block z-c&quot;&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function z-c&quot;&gt;&lt;span class=&quot;z-meta z-block z-c&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-c&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In Vala, we use string offsets:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;vala&quot; class=&quot;language-vala z-code&quot;&gt;&lt;code class=&quot;language-vala&quot; data-lang=&quot;vala&quot;&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-storage z-modifier z-vala&quot;&gt;static&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-vala&quot;&gt;string&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-method z-constructor z-vala&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-constructor z-vala&quot;&gt;iso_639_from_tag&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-method z-parameters z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-method z-constructor z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-parameters z-vala&quot;&gt;&lt;span class=&quot;z-storage z-type z-vala&quot;&gt;string&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-vala&quot;&gt;dict_tag&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-method z-parameters z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-vala&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;    &lt;span class=&quot;z-keyword z-control z-flow z-return z-vala&quot;&gt;return&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;dict_tag&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-variable z-function z-vala&quot;&gt;substring&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-meta z-number z-integer z-decimal z-vala&quot;&gt;&lt;span class=&quot;z-constant z-numeric z-value z-vala&quot;&gt;0&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-argument z-vala&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;dict_tag&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-variable z-function z-vala&quot;&gt;index_of_char&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-meta z-string z-vala&quot;&gt;&lt;span class=&quot;z-string z-quoted z-single z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-vala&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-character z-literal z-vala&quot;&gt;_&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-vala&quot;&gt;&amp;#39;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-statement z-vala&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-vala&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The comparison here is perhaps obscured by the simplification obtained in Vala from automatic memory management, which is nothing to do with string handling &lt;em&gt;per se&lt;&#x2F;em&gt;.&lt;&#x2F;p&gt;
&lt;h4 id=&quot;binding-challenges&quot;&gt;Binding challenges&lt;a class=&quot;zola-anchor&quot; href=&quot;#binding-challenges&quot; aria-label=&quot;Anchor link for: binding-challenges&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h4&gt;
&lt;p&gt;I had a number of particular challenges. Some of them may be relevant to other developers, but I detail them here mostly to illustrate that Vala can bind just about anything if you try!&lt;&#x2F;p&gt;
&lt;h5 id=&quot;config-h&quot;&gt;&lt;code&gt;config.h&lt;&#x2F;code&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#config-h&quot; aria-label=&quot;Anchor link for: config-h&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h5&gt;
&lt;p&gt;Like any Autoconf-based build system, mine produce a &lt;code&gt;config.h&lt;&#x2F;code&gt; header of various &lt;code&gt;#define&lt;&#x2F;code&gt;d symbols, some of which my C code uses. These I simply replicate in a &lt;a href=&quot;https:&#x2F;&#x2F;gitlab.gnome.org&#x2F;GNOME&#x2F;vala&#x2F;-&#x2F;blob&#x2F;main&#x2F;vapi&#x2F;config.vapi&quot;&gt;&lt;code&gt;Config&lt;&#x2F;code&gt; module&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;One could imagine generating this automatically from &lt;code&gt;config.h&lt;&#x2F;code&gt;, but since I didn’t need more than a handful of values in my projects, I didn’t bother.&lt;&#x2F;p&gt;
&lt;h5 id=&quot;relocate&quot;&gt;&lt;code&gt;relocate&lt;&#x2F;code&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#relocate&quot; aria-label=&quot;Anchor link for: relocate&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h5&gt;
&lt;p&gt;This is a GNU API that returns a string that may or may not be &lt;code&gt;malloc&lt;&#x2F;code&gt;ed. You can tell which easily enough: if the return value is different from the argument, then it is a newly-allocated string. The problem is getting Vala to do the right thing. Even in C, I wrote my own wrapper function that would always return a &lt;code&gt;malloc&lt;&#x2F;code&gt;ed string.&lt;&#x2F;p&gt;
&lt;p&gt;Here’s the Vala VAPI definition:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;vala&quot; class=&quot;language-vala z-code&quot;&gt;&lt;code class=&quot;language-vala&quot; data-lang=&quot;vala&quot;&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-annotation z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-annotation z-begin z-vala&quot;&gt;[&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-annotation z-vala&quot;&gt;CCode&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-annotation z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-variable z-parameter z-vala&quot;&gt;cheader_filename&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-vala&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-vala&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;relocatable.h&lt;span class=&quot;z-punctuation z-definition z-string z-end z-vala&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-argument z-vala&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-vala&quot;&gt;cname&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-vala&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-vala&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;relocate&lt;span class=&quot;z-punctuation z-definition z-string z-end z-vala&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-annotation z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-annotation z-end z-vala&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-storage z-modifier z-access z-vala&quot;&gt;private&lt;&#x2F;span&gt; &lt;span class=&quot;z-support z-type z-vala&quot;&gt;unowned&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;string&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;_gnulib_relocate&lt;&#x2F;span&gt;(&lt;span class=&quot;z-variable z-other z-vala&quot;&gt;string&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;path&lt;&#x2F;span&gt;&lt;span class=&quot;z-invalid z-illegal z-stray z-brace z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-statement z-vala&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;I use the name &lt;code&gt;_gnulib_relocate&lt;&#x2F;code&gt; because I am about to add a Vala wrapper which uses the original name. We tell Vala that the return value is &lt;code&gt;unowned&lt;&#x2F;code&gt;, to prevent Vala thinking that it must &lt;code&gt;free&lt;&#x2F;code&gt; it.&lt;&#x2F;p&gt;
&lt;p&gt;Here’s the wrapper, which I also put in the VAPI:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;vala&quot; class=&quot;language-vala z-code&quot;&gt;&lt;code class=&quot;language-vala&quot; data-lang=&quot;vala&quot;&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-annotation z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-annotation z-begin z-vala&quot;&gt;[&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-annotation z-vala&quot;&gt;CCode&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-annotation z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-variable z-parameter z-vala&quot;&gt;cname&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-vala&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-vala&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;_vala_relocate&lt;span class=&quot;z-punctuation z-definition z-string z-end z-vala&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-annotation z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-annotation z-end z-vala&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-storage z-modifier z-access z-vala&quot;&gt;public&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-vala&quot;&gt;string&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-method z-constructor z-vala&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-constructor z-vala&quot;&gt;relocate&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-method z-parameters z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-method z-constructor z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-parameters z-vala&quot;&gt;&lt;span class=&quot;z-storage z-type z-vala&quot;&gt;string&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-vala&quot;&gt;path&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-method z-parameters z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-vala&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;    &lt;span class=&quot;z-support z-type z-vala&quot;&gt;unowned&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;string&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;newpath&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-variable z-vala&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-variable z-function z-vala&quot;&gt;_gnulib_relocate&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-variable z-other z-vala&quot;&gt;path&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-statement z-vala&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;    &lt;span class=&quot;z-comment z-line z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-vala&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; If relocate malloced, then return the value, defeating Vala&amp;#39;s attempt
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;    &lt;span class=&quot;z-comment z-line z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-vala&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; to (re-)strdup it.
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;    &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;GLib&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-variable z-function z-vala&quot;&gt;return_val_if_fail&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-variable z-other z-vala&quot;&gt;newpath&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-other z-vala&quot;&gt;data&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-vala&quot;&gt;==&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;path&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-other z-vala&quot;&gt;data&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-argument z-vala&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;newpath&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-statement z-vala&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;    &lt;span class=&quot;z-comment z-line z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-vala&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; Otherwise, allow Vala to strdup the non-malloced return value.
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;    &lt;span class=&quot;z-keyword z-control z-flow z-return z-vala&quot;&gt;return&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;newpath&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-statement z-vala&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-vala&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;This is tricky. First, it calls the “real” &lt;code&gt;relocate&lt;&#x2F;code&gt; (but using its Vala name), and stores the result in an &lt;code&gt;unowned&lt;&#x2F;code&gt; string. So far, &lt;code&gt;valac&lt;&#x2F;code&gt; will not allocate any memory.&lt;&#x2F;p&gt;
&lt;p&gt;We then test the value returned, and if it is unequal to the original argument, return it. Because we use the &lt;code&gt;return_if_fail&lt;&#x2F;code&gt; macro, &lt;code&gt;valac&lt;&#x2F;code&gt; will not insert memory allocation code at this point, but that’s OK, because &lt;code&gt;relocate&lt;&#x2F;code&gt; has already &lt;code&gt;malloc&lt;&#x2F;code&gt;ed in this case, so the return value is an allocated &lt;code&gt;string&lt;&#x2F;code&gt; as indicated.&lt;&#x2F;p&gt;
&lt;p&gt;Otherwise, we simply &lt;code&gt;return&lt;&#x2F;code&gt; the un-&lt;code&gt;malloc&lt;&#x2F;code&gt;ed value. In the generated C, &lt;code&gt;valac&lt;&#x2F;code&gt; will insert a &lt;code&gt;g_strdup&lt;&#x2F;code&gt; at this point, so again the return value is an allocated string.&lt;&#x2F;p&gt;
&lt;p&gt;Phew!&lt;&#x2F;p&gt;
&lt;h5 id=&quot;strfreev&quot;&gt;&lt;code&gt;strfreev&lt;&#x2F;code&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#strfreev&quot; aria-label=&quot;Anchor link for: strfreev&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h5&gt;
&lt;p&gt;Rather surprisingly, while &lt;code&gt;g_strfreev&lt;&#x2F;code&gt; takes &lt;code&gt;char **&lt;&#x2F;code&gt; (because it frees a list of strings), &lt;code&gt;strfreev&lt;&#x2F;code&gt; takes &lt;code&gt;string **&lt;&#x2F;code&gt;. Why? Well, Vala uses one level of pointer indirection to indicate that a value is not managed by Vala. So we have the following set of equivalences:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;string&lt;&#x2F;code&gt; = &lt;code&gt;char *&lt;&#x2F;code&gt; (generates &lt;code&gt;char *&lt;&#x2F;code&gt;; as we expect, a string is a pointer to &lt;code&gt;char&lt;&#x2F;code&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;string *&lt;&#x2F;code&gt; = &lt;code&gt;char *&lt;&#x2F;code&gt; (generates &lt;code&gt;char *&lt;&#x2F;code&gt;; this is just a &lt;code&gt;string&lt;&#x2F;code&gt; that Vala does not manage)&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;string **&lt;&#x2F;code&gt; = &lt;code&gt;char **&lt;&#x2F;code&gt; (generates &lt;code&gt;char **&lt;&#x2F;code&gt;; now we have a list of &lt;code&gt;string&lt;&#x2F;code&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;This was a problem for me because I wanted to use &lt;code&gt;strfreev&lt;&#x2F;code&gt; to free a “real” &lt;code&gt;char **&lt;&#x2F;code&gt; passed in from C. But &lt;code&gt;valac&lt;&#x2F;code&gt; gives a type error. I got sufficiently confused that I submitted a &lt;a href=&quot;https:&#x2F;&#x2F;gitlab.gnome.org&#x2F;GNOME&#x2F;vala&#x2F;-&#x2F;merge_requests&#x2F;383&quot;&gt;merge request&lt;&#x2F;a&gt;, and Rico had to de-confuse me. In the end, all I needed was a cast:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;vala&quot; class=&quot;language-vala z-code&quot;&gt;&lt;code class=&quot;language-vala&quot; data-lang=&quot;vala&quot;&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-variable z-function z-vala&quot;&gt;strfreev&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;(&lt;span class=&quot;z-storage z-type z-vala&quot;&gt;string&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-vala&quot;&gt;*&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-vala&quot;&gt;*&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-other z-vala&quot;&gt;c_string_list&lt;&#x2F;span&gt;&lt;span class=&quot;z-invalid z-illegal z-stray z-brace z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-statement z-vala&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;The cast placates &lt;code&gt;valac&lt;&#x2F;code&gt;, and the generated C ends up calling &lt;code&gt;g_strfreev&lt;&#x2F;code&gt;, which expected a &lt;code&gt;char **&lt;&#x2F;code&gt; all along.&lt;&#x2F;p&gt;
&lt;h5 id=&quot;s-size-t-is-not-really-s-size-t&quot;&gt;&lt;code&gt;[s]size_t&lt;&#x2F;code&gt; is not really &lt;code&gt;[s]size_t&lt;&#x2F;code&gt;&lt;a class=&quot;zola-anchor&quot; href=&quot;#s-size-t-is-not-really-s-size-t&quot; aria-label=&quot;Anchor link for: s-size-t-is-not-really-s-size-t&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h5&gt;
&lt;p&gt;When compiling my Vala version of Enchant on Windows, I accidentally tried compiling it in a flavour of Windows I don’t normally test, namely Mingw MSYS (I normally build for Mingw64-x86_64 and Mingw64-i686). To my surprise, I got a compilation error: GCC complained that one 8-byte signed integer type (&lt;code&gt;long int&lt;&#x2F;code&gt;) was incompatible with another 8-byte signed integer type (&lt;code&gt;long long int&lt;&#x2F;code&gt;). Yes, these are both 64-bit types on this system, and yes, they are nonetheless incompatible.&lt;&#x2F;p&gt;
&lt;p&gt;But why did I have this problem in the first place? I was using Vala’s &lt;code&gt;ssize_t&lt;&#x2F;code&gt;, and Vala maps this to GLib’s &lt;code&gt;gsize&lt;&#x2F;code&gt;. I don’t know why, but it’s a problem, because in some cases, like mine, these two types end up with different fundamental types in the C compiler, and an error results. I filed an &lt;a href=&quot;https:&#x2F;&#x2F;gitlab.gnome.org&#x2F;GNOME&#x2F;vala&#x2F;-&#x2F;issues&#x2F;1539&quot;&gt;issue&lt;&#x2F;a&gt; and found a workaround, which was to copy the definition of &lt;code&gt;size_t&lt;&#x2F;code&gt; and &lt;code&gt;ssize_t&lt;&#x2F;code&gt; from &lt;code&gt;posix.vapi&lt;&#x2F;code&gt;, which are normally only used when &lt;code&gt;valac&lt;&#x2F;code&gt; is used with &lt;code&gt;--profile posix&lt;&#x2F;code&gt; and the GLib definitions are not used. The &lt;code&gt;posix.vapi&lt;&#x2F;code&gt; definitions correctly map &lt;code&gt;size_t&lt;&#x2F;code&gt; in Vala to &lt;code&gt;size_t&lt;&#x2F;code&gt; in C.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;and-helping-hands&quot;&gt;…and helping hands&lt;a class=&quot;zola-anchor&quot; href=&quot;#and-helping-hands&quot; aria-label=&quot;Anchor link for: and-helping-hands&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h3&gt;
&lt;p&gt;I mentioned above that Vala is a small ecosystem. An up-side to this is that it’s friendly and usually quick to get things done. The fixes I offered were mostly triaged and applied by the indefatigable Rico Tzschichholz, who was often able to suggest more elegant solutions, mostly for my VAPI bindings. I ended up using a pre-release of &lt;code&gt;valac&lt;&#x2F;code&gt; for Zile, but I could release the code, since you didn’t need &lt;code&gt;valac&lt;&#x2F;code&gt; to build it, and within a few months, Vala 0.52 was released with all the fixes I needed.&lt;&#x2F;p&gt;
&lt;p&gt;With Enchant I have had help from Rico again, and also from Lorenz Wildberg; many thanks to both of them, and to everyone else in the community to has both helped me with my projects, and welcomed my own contributions, which, I hope, improve things for everyone else.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;was-it-worth-it&quot;&gt;Was it worth it?&lt;a class=&quot;zola-anchor&quot; href=&quot;#was-it-worth-it&quot; aria-label=&quot;Anchor link for: was-it-worth-it&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;With GNU Zile I can say: probably, yes. I found one “brown-paper bag” bug in the initial stable release, but that’s it: I have made only two non-alpha releases of the Vala version. On the other hand, the C version was already very stable, and I suspect it’s not widely used any more (I myself have encouraged users to migrate to Emacs for some years!). But then, it was a low-risk project to try out this new technique. And a few years on, the code still builds with no problems: unlike some language ecosystems, Vala seems very stable, and code does not rot fast.&lt;&#x2F;p&gt;
&lt;p&gt;For Enchant, it’s too early to say. It’s a much more widely-used package, and though it is quite mature, I have steadily improved and developed it over the past few years, and intend to continue in future. I hope that the switch to Vala will not annoy packagers (it shouldn’t, as they shouldn’t have to change their recipes at all if they don’t want to), and that developers should not notice (because the library remains API and ABI compatible), nor users (because the functionality should be identical, and the performance much the same). Certainly, I expect it will make my future work more productive and fun!&lt;&#x2F;p&gt;
&lt;h2 id=&quot;is-this-a-good-idea&quot;&gt;Is this a good idea?&lt;a class=&quot;zola-anchor&quot; href=&quot;#is-this-a-good-idea&quot; aria-label=&quot;Anchor link for: is-this-a-good-idea&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;My projects are old-school: highly portable, low-level C. This is not an area that Vala is particularly aimed at, although it does pretty well here. For projects that are firmly in the GLib world, and especially when they use related libraries such as Gtk, rewriting C in Vala seems an excellent option to me.&lt;&#x2F;p&gt;
&lt;p&gt;While I completely rewrote my projects before releasing them, I think I’ve shown there’s no need to do that. When I rewrote Zile in Lua, the intermediate steps had horrible performance, because the Lua&#x2F;C interface I used was very inefficient (Lua has an efficient-but-complex C API; I chose to use some simple-but-slow home-grown macros instead). When I rewrote Zile in Vala, the performance was much the same at every stage of the process, and I could easily have translated just half of the code and released the project. Many projects, particularly larger ones, might benefit from such an approach.&lt;&#x2F;p&gt;
&lt;p&gt;After completing the translation, the code was already significantly shorter and more readable than in C. This in turn unlocked further simplifications: able to “see the wood for the trees” it was much easier to refactor and further simplify the code. With Zile, I eventually reduced 8,000 lines of C to 6,000 of Vala, a 25% reduction; in Enchant the percentage saving was more like 35%, largely because of a reduction in GLib boilerplate, such as argument validation, which Vala mostly automates.&lt;&#x2F;p&gt;
&lt;p&gt;One final thought: I hope that Vala will continue to flourish for many years, but if it doesn’t, then all is not lost: in the worst case, I or my successor could salvage the generated C code, which is ugly but far from impossible to read (and C, I think we can confidently say, will be around for many decades yet); and Vala is also a relatively “neutral” language that would be easy to translate again, into Rust, say; indeed, it would be easier to do that starting from Vala than from C, largely because the Vala code is easier to read and understand.&lt;&#x2F;p&gt;
&lt;hr &#x2F;&gt;
&lt;p&gt;You are always invited to join our matrix chat &lt;a href=&quot;https:&#x2F;&#x2F;matrix.to&#x2F;#&#x2F;#_gimpnet_#vala:gnome.org&quot;&gt;#vala:gnome.org&lt;&#x2F;a&gt; and ask questions about Vala or how to contribute. Until then, have a nice time and build great apps with Vala!&lt;&#x2F;p&gt;
&lt;!--  LocalWords:  Vala’s GLib GObject Lua’s VAPI GLib’s Enchant’s codegen
&lt;!--  LocalWords:  Automake’s Terminfo Gtk Mingw MSYS VAPIs regex libgee ed
&lt;!--  LocalWords:  ArrayList int getopt freopen FileStream putc valac Jürg
&lt;!--  LocalWords:  config Billeter malloc vala CCode cheader cname newpath
&lt;!--  LocalWords:  malloced Vala&#x27;s strdup val un strfreev Mingw64 i686 vapi
&lt;!--  LocalWords:  ssize gsize posix gimpnet se
--&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>print(&quot;Hello Planet GNOME&quot;);</title>
        <published>2023-10-11T00:00:00+00:00</published>
        <updated>2023-10-11T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://vala.dev/blog/planet-gnome/"/>
        <id>https://vala.dev/blog/planet-gnome/</id>
        
        <content type="html" xml:base="https://vala.dev/blog/planet-gnome/">&lt;p&gt;Hello to all of you reading &lt;a href=&quot;https:&#x2F;&#x2F;planet.gnome.org&#x2F;&quot;&gt;Planet GNOME&lt;&#x2F;a&gt; right now! This is the first post from the &lt;a href=&quot;https:&#x2F;&#x2F;vala.dev&#x2F;blog&#x2F;&quot;&gt;Vala Blog&lt;&#x2F;a&gt; now appearing in the big wide world of GNOME.&lt;&#x2F;p&gt;
&lt;p&gt;Big thanks to the Planet GNOME team and Felipe Borges for making this possible!&lt;&#x2F;p&gt;
&lt;p&gt;This blog is operated by the Vala project and we are posting here once in a while about new Vala releases, noteworthy changes like new features and how to use them, interesting projects using Vala and their experience with it and other stuff related to the Vala programming language.&lt;&#x2F;p&gt;
&lt;p&gt;If you have an idea to write about something that fits one of the categories above, reach out to us and we are sure eventually a great article will be released! (Talk to us &lt;a href=&quot;https:&#x2F;&#x2F;vala.dev&#x2F;#community&quot;&gt;here&lt;&#x2F;a&gt;)&lt;&#x2F;p&gt;
&lt;p&gt;Stay tuned for the next posts coming out! :)&lt;&#x2F;p&gt;
</content>
        
    </entry>
    <entry xml:lang="en">
        <title>Vala 0.56</title>
        <published>2022-03-18T00:00:00+00:00</published>
        <updated>2022-03-18T00:00:00+00:00</updated>
        
        <author>
          <name>
            
              Unknown
            
          </name>
        </author>
        
        <link rel="alternate" type="text/html" href="https://vala.dev/blog/vala-0-56/"/>
        <id>https://vala.dev/blog/vala-0-56/</id>
        
        <content type="html" xml:base="https://vala.dev/blog/vala-0-56/">&lt;p&gt;After 4 months of work we are proud to announce a new release of Vala. This time it contains lots of new language features and advancements and of course also the usual bug fixes and binding updates.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;asynchronous-main-function&quot;&gt;Asynchronous Main Function&lt;a class=&quot;zola-anchor&quot; href=&quot;#asynchronous-main-function&quot; aria-label=&quot;Anchor link for: asynchronous-main-function&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;With the new release the main function can now be defined as &lt;code&gt;async&lt;&#x2F;code&gt;. This has multiple advantages. For example is it now possible to call asynchronous functions with &lt;code&gt;yield&lt;&#x2F;code&gt;:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;vala&quot; class=&quot;language-vala z-code&quot;&gt;&lt;code class=&quot;language-vala&quot; data-lang=&quot;vala&quot;&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-storage z-modifier z-vala&quot;&gt;async&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-vala&quot;&gt;int&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-method z-constructor z-vala&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-constructor z-vala&quot;&gt;main&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-method z-parameters z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-method z-constructor z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-parameters z-vala&quot;&gt;&lt;span class=&quot;z-storage z-type z-vala&quot;&gt;string&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-brackets z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-begin z-vala&quot;&gt;[&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-end z-vala&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-vala&quot;&gt;args&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-method z-parameters z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-vala&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;    &lt;span class=&quot;z-storage z-type z-vala&quot;&gt;string&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;dir&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-variable z-vala&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;args&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-other z-vala&quot;&gt;length&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-vala&quot;&gt;==&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-number z-integer z-decimal z-vala&quot;&gt;&lt;span class=&quot;z-constant z-numeric z-value z-vala&quot;&gt;2&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-ternary z-vala&quot;&gt;?&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;args&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-brackets z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-begin z-vala&quot;&gt;[&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-brackets z-vala&quot;&gt;&lt;span class=&quot;z-meta z-number z-integer z-decimal z-vala&quot;&gt;&lt;span class=&quot;z-constant z-numeric z-value z-vala&quot;&gt;1&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-brackets z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-end z-vala&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-ternary z-vala&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-vala&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;.&lt;span class=&quot;z-punctuation z-definition z-string z-end z-vala&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-statement z-vala&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;    &lt;span class=&quot;z-storage z-type z-variable z-vala&quot;&gt;var&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;file&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-variable z-vala&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;File&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-variable z-function z-vala&quot;&gt;new_for_commandline_arg&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-variable z-other z-vala&quot;&gt;dir&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-statement z-vala&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;    &lt;span class=&quot;z-meta z-block z-trycatch z-vala&quot;&gt;&lt;span class=&quot;z-keyword z-control z-trycatch z-try z-vala&quot;&gt;try&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-vala&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-trycatch z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;        &lt;span class=&quot;z-support z-type z-vala&quot;&gt;FileEnumerator&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;enumerator&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-variable z-vala&quot;&gt;=&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-trycatch z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;            &lt;span class=&quot;z-keyword z-other z-vala&quot;&gt;yield&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;file&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-variable z-function z-vala&quot;&gt;enumerate_children_async&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-trycatch z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;                &lt;span class=&quot;z-string z-quoted z-double z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-vala&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;standard::*,time::*&lt;span class=&quot;z-punctuation z-definition z-string z-end z-vala&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-argument z-vala&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-trycatch z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;                &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;FileQueryInfoFlags&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-other z-vala&quot;&gt;NOFOLLOW_SYMLINKS&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-trycatch z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;            &lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-statement z-vala&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-trycatch z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;        &lt;span class=&quot;z-support z-type z-vala&quot;&gt;List&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-generic z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-begin z-vala&quot;&gt;&amp;lt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-generic z-vala&quot;&gt;&lt;span class=&quot;z-support z-type z-vala&quot;&gt;FileInfo&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-generic z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-generic z-end z-vala&quot;&gt;&amp;gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;children&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-variable z-vala&quot;&gt;=&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-trycatch z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;            &lt;span class=&quot;z-keyword z-other z-vala&quot;&gt;yield&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;enumerator&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-variable z-function z-vala&quot;&gt;next_files_async&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-storage z-type z-vala&quot;&gt;int&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-other z-vala&quot;&gt;MAX&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-statement z-vala&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-trycatch z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;        &lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-variable z-function z-vala&quot;&gt;print&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-vala&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;total %lu&lt;span class=&quot;z-constant z-character z-escape z-vala&quot;&gt;\n&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-vala&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-argument z-vala&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;children&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-variable z-function z-vala&quot;&gt;length&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-statement z-vala&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-trycatch z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;        &lt;span class=&quot;z-keyword z-control z-loop z-foreach z-vala&quot;&gt;foreach&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-storage z-type z-variable z-vala&quot;&gt;var&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;info&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-control z-flow z-vala&quot;&gt;in&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;children&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-vala&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-trycatch z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;            &lt;span class=&quot;z-comment z-line z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-comment z-vala&quot;&gt;&#x2F;&#x2F;&lt;&#x2F;span&gt; &amp;lt;file-type&amp;gt; &amp;lt;access-date&amp;gt; &amp;lt;size&amp;gt; &amp;lt;name&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-trycatch z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;            &lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-variable z-function z-vala&quot;&gt;print&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-vala&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;%26s %24s %10&lt;span class=&quot;z-punctuation z-definition z-string z-end z-vala&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-vala&quot;&gt;+&lt;&#x2F;span&gt;&lt;span class=&quot;z-storage z-type z-vala&quot;&gt;int64&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-other z-vala&quot;&gt;FORMAT&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-vala&quot;&gt;+&lt;&#x2F;span&gt;&lt;span class=&quot;z-string z-quoted z-double z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-vala&quot;&gt;&amp;quot;&lt;&#x2F;span&gt; B %s&lt;span class=&quot;z-constant z-character z-escape z-vala&quot;&gt;\n&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-vala&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-argument z-vala&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-trycatch z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;            &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;info&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-variable z-function z-vala&quot;&gt;get_content_type&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-argument z-vala&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-trycatch z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;            &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;info&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-variable z-function z-vala&quot;&gt;get_access_date_time&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-variable z-function z-vala&quot;&gt;to_string&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-argument z-vala&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-trycatch z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;            &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;info&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-variable z-function z-vala&quot;&gt;get_size&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-argument z-vala&quot;&gt;,&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-trycatch z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;            &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;info&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-variable z-function z-vala&quot;&gt;get_name&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-statement z-vala&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-trycatch z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;        &lt;span class=&quot;z-punctuation z-section z-block z-end z-vala&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-trycatch z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-block z-end z-vala&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-control z-trycatch z-catch z-vala&quot;&gt;catch&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-support z-type z-vala&quot;&gt;Error&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;e&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-vala&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-trycatch z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;        &lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-variable z-function z-vala&quot;&gt;printerr&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-vala&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;failed to enumerate files - %s&lt;span class=&quot;z-constant z-character z-escape z-vala&quot;&gt;\n&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-vala&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-argument z-vala&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;e&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-other z-vala&quot;&gt;message&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-statement z-vala&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-trycatch z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;        &lt;span class=&quot;z-keyword z-control z-flow z-return z-vala&quot;&gt;return&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-number z-integer z-decimal z-vala&quot;&gt;&lt;span class=&quot;z-constant z-numeric z-value z-vala&quot;&gt;1&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-statement z-vala&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-trycatch z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-block z-end z-vala&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-trycatch z-vala&quot;&gt;    &lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-control z-flow z-return z-vala&quot;&gt;return&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-number z-integer z-decimal z-vala&quot;&gt;&lt;span class=&quot;z-constant z-numeric z-value z-vala&quot;&gt;0&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-statement z-vala&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-vala&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;In main blocks (experimental feature that allows it to write code in a file without putting in a main function) invoking functions with &lt;code&gt;yield&lt;&#x2F;code&gt; is also supported by making the main block automatically asynchronous.&lt;&#x2F;p&gt;
&lt;p&gt;Merge Request &lt;a href=&quot;https:&#x2F;&#x2F;gitlab.gnome.org&#x2F;GNOME&#x2F;vala&#x2F;-&#x2F;merge_requests&#x2F;226&quot;&gt;#226&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;nested-functions&quot;&gt;Nested functions&lt;a class=&quot;zola-anchor&quot; href=&quot;#nested-functions&quot; aria-label=&quot;Anchor link for: nested-functions&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;A simple but very useful feature is to be able to nest functions inside of other functions or methods. These functions are then only visible to the code in the function that contains the nested one. But on the other way the code in the nested function has access to variables in the upper method. Actually they are only lambdas assigned to a local variable.&lt;&#x2F;p&gt;
&lt;p&gt;Use cases are to structure very complicated functions into multiple smaller ones, without exposing them publicly. In this example the same asynchronous callback is used for two invocations, in which you otherwise would use lambdas:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;vala&quot; class=&quot;language-vala z-code&quot;&gt;&lt;code class=&quot;language-vala&quot; data-lang=&quot;vala&quot;&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-storage z-type z-vala&quot;&gt;void&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-method z-constructor z-vala&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-constructor z-vala&quot;&gt;write_streams&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-method z-parameters z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-method z-constructor z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-parameters z-vala&quot;&gt;&lt;span class=&quot;z-support z-type z-vala&quot;&gt;OutputStream&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-vala&quot;&gt;stream1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameter z-function z-vala&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-support z-type z-vala&quot;&gt;OutputStream&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-vala&quot;&gt;stream2&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameter z-function z-vala&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-vala&quot;&gt;uint8&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-brackets z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-begin z-vala&quot;&gt;[&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-end z-vala&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-vala&quot;&gt;data&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-method z-parameters z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-vala&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;    &lt;span class=&quot;z-storage z-type z-vala&quot;&gt;void&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-method z-constructor z-vala&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-constructor z-vala&quot;&gt;nested_function&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-method z-parameters z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-method z-constructor z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-parameters z-vala&quot;&gt;&lt;span class=&quot;z-support z-type z-vala&quot;&gt;Object&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-vala&quot;&gt;object_source&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-parameter z-function z-vala&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-support z-type z-vala&quot;&gt;AsyncResult&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-vala&quot;&gt;result&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-method z-parameters z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-vala&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;        &lt;span class=&quot;z-support z-type z-vala&quot;&gt;OutputStream&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;stream&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-variable z-vala&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;object_source&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-reflection z-vala&quot;&gt;as&lt;&#x2F;span&gt; &lt;span class=&quot;z-support z-type z-vala&quot;&gt;OutputStream&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-statement z-vala&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;        &lt;span class=&quot;z-meta z-block z-trycatch z-vala&quot;&gt;&lt;span class=&quot;z-keyword z-control z-trycatch z-try z-vala&quot;&gt;try&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-vala&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-trycatch z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;            &lt;span class=&quot;z-storage z-type z-vala&quot;&gt;ssize_t&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;size&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-variable z-vala&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;stream&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-other z-vala&quot;&gt;write_async&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-variable z-function z-vala&quot;&gt;finish&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-variable z-other z-vala&quot;&gt;result&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-statement z-vala&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-trycatch z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;            &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;stdout&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-variable z-function z-vala&quot;&gt;printf&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-raw z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-vala&quot;&gt;@&amp;quot;&lt;&#x2F;span&gt;Written $size bytes\n&lt;span class=&quot;z-punctuation z-definition z-string z-end z-vala&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-statement z-vala&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-trycatch z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;        &lt;span class=&quot;z-punctuation z-section z-block z-end z-vala&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-control z-trycatch z-catch z-vala&quot;&gt;catch&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-support z-type z-vala&quot;&gt;Error&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;e&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-vala&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-trycatch z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;            &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;stderr&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-variable z-function z-vala&quot;&gt;printf&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-vala&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;Error writing to stream: %s&lt;span class=&quot;z-punctuation z-definition z-string z-end z-vala&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-argument z-vala&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;e&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-other z-vala&quot;&gt;message&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-statement z-vala&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-trycatch z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;        &lt;span class=&quot;z-punctuation z-section z-block z-end z-vala&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-trycatch z-vala&quot;&gt;    &lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-vala&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;    &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;stream1&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-variable z-function z-vala&quot;&gt;write_async&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-variable z-other z-vala&quot;&gt;data&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-argument z-vala&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;nested_function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-statement z-vala&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;    &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;stream2&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-variable z-function z-vala&quot;&gt;write_async&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-variable z-other z-vala&quot;&gt;data&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-argument z-vala&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;nested_function&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-statement z-vala&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-vala&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Merge Request &lt;a href=&quot;https:&#x2F;&#x2F;gitlab.gnome.org&#x2F;GNOME&#x2F;vala&#x2F;-&#x2F;merge_requests&#x2F;203&quot;&gt;#203&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;redesign-of-error-and-warning-output&quot;&gt;Redesign of error and warning output&lt;a class=&quot;zola-anchor&quot; href=&quot;#redesign-of-error-and-warning-output&quot; aria-label=&quot;Anchor link for: redesign-of-error-and-warning-output&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;If programming errors are outputted at compile time in a pretty way and provide as much information as possible, they massively help and speed up finding the mistakes and correcting them. In the new release this part got an update. Look at the differences yourself:&lt;&#x2F;p&gt;
&lt;p&gt;Before Vala 0.56:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;vala&quot; class=&quot;language-vala z-code&quot;&gt;&lt;code class=&quot;language-vala&quot; data-lang=&quot;vala&quot;&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-storage z-type z-vala&quot;&gt;int&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;foo&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-variable z-vala&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-variable z-function z-vala&quot;&gt;bar&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-statement z-vala&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;          &lt;span class=&quot;z-keyword z-operator z-vala&quot;&gt;^&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-vala&quot;&gt;^&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-vala&quot;&gt;^&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Vala 0.56:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;vala&quot; class=&quot;language-vala z-code&quot;&gt;&lt;code class=&quot;language-vala&quot; data-lang=&quot;vala&quot;&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-number z-integer z-decimal z-vala&quot;&gt;&lt;span class=&quot;z-constant z-numeric z-value z-vala&quot;&gt;2&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-vala&quot;&gt;|&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-vala&quot;&gt;int&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;foo&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-vala&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-variable z-function z-vala&quot;&gt;bar&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-statement z-vala&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;  &lt;span class=&quot;z-keyword z-operator z-vala&quot;&gt;|&lt;&#x2F;span&gt;           &lt;span class=&quot;z-keyword z-operator z-vala&quot;&gt;^&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-vala&quot;&gt;~&lt;&#x2F;span&gt;&lt;span class=&quot;z-keyword z-operator z-vala&quot;&gt;~&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;What looks better? :)&lt;&#x2F;p&gt;
&lt;p&gt;Issue &lt;a href=&quot;https:&#x2F;&#x2F;gitlab.gnome.org&#x2F;GNOME&#x2F;vala&#x2F;-&#x2F;issues&#x2F;764&quot;&gt;#764&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;dynamic-invocation-of-signals&quot;&gt;Dynamic invocation of Signals&lt;a class=&quot;zola-anchor&quot; href=&quot;#dynamic-invocation-of-signals&quot; aria-label=&quot;Anchor link for: dynamic-invocation-of-signals&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;Libraries using the GObject type system are providing usually documentation about their API so other languages can use them. However sometimes some parts are missing. With the &lt;code&gt;dynamic&lt;&#x2F;code&gt; keyword an object can be treated as not having all properties or signals specified and they can be accessed dynamically without checking:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;vala&quot; class=&quot;language-vala z-code&quot;&gt;&lt;code class=&quot;language-vala&quot; data-lang=&quot;vala&quot;&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-support z-type z-vala&quot;&gt;dynamic&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;Gst&lt;&#x2F;span&gt;.&lt;span class=&quot;z-variable z-other z-vala&quot;&gt;Element&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;appsink&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-variable z-vala&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;Gst&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-other z-vala&quot;&gt;ElementFactory&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-variable z-function z-vala&quot;&gt;make&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-vala&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;appsink&lt;span class=&quot;z-punctuation z-definition z-string z-end z-vala&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-argument z-vala&quot;&gt;,&lt;&#x2F;span&gt; &lt;span class=&quot;z-string z-quoted z-double z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-vala&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;my_src&lt;span class=&quot;z-punctuation z-definition z-string z-end z-vala&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-statement z-vala&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-variable z-other z-vala&quot;&gt;appsink&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-other z-vala&quot;&gt;max_buffers&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-vala&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-number z-integer z-decimal z-vala&quot;&gt;&lt;span class=&quot;z-constant z-numeric z-value z-vala&quot;&gt;0&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-statement z-vala&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-variable z-other z-vala&quot;&gt;appsink&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-other z-vala&quot;&gt;eos&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-variable z-function z-vala&quot;&gt;connect&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-variable z-other z-vala&quot;&gt;on_eos&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-statement z-vala&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-support z-type z-vala&quot;&gt;Gst&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-namespace z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-support z-type z-vala&quot;&gt;Sample&lt;&#x2F;span&gt;&lt;span class=&quot;z-storage z-type z-nullable z-vala&quot;&gt;?&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;res&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-variable z-vala&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;appsink&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-other z-vala&quot;&gt;pull_sample&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-variable z-function z-vala&quot;&gt;emit&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-statement z-vala&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;As you can see, signals are now also callable with &lt;code&gt;.emit ()&lt;&#x2F;code&gt;. This is necessary to differentiate between a method or a dynamic signal. But this syntax can be also used with non-dynamic variables if wanted.&lt;&#x2F;p&gt;
&lt;p&gt;Merge Request &lt;a href=&quot;https:&#x2F;&#x2F;gitlab.gnome.org&#x2F;GNOME&#x2F;vala&#x2F;-&#x2F;merge_requests&#x2F;227&quot;&gt;#227&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;partial-classes&quot;&gt;Partial classes&lt;a class=&quot;zola-anchor&quot; href=&quot;#partial-classes&quot; aria-label=&quot;Anchor link for: partial-classes&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;In rare cases, if a class is so huge and complex, it can be now split up into multiple pieces even into multiple files. All parts of the class only need the partial keyword in front of it.&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;vala&quot; class=&quot;language-vala z-code&quot;&gt;&lt;code class=&quot;language-vala&quot; data-lang=&quot;vala&quot;&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-storage z-modifier z-access z-vala&quot;&gt;public&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-modifier z-vala&quot;&gt;partial&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-class z-vala&quot;&gt;&lt;span class=&quot;z-storage z-type z-class z-vala&quot;&gt;class&lt;&#x2F;span&gt; &lt;span class=&quot;z-entity z-name z-class z-vala&quot;&gt;Foo &lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-type z-vala&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-entity z-other z-inherited-class z-vala&quot;&gt;Object&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-class z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-vala&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-class z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;    &lt;span class=&quot;z-storage z-modifier z-access z-vala&quot;&gt;public&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-vala&quot;&gt;double&lt;&#x2F;span&gt; &lt;span class=&quot;z-support z-type z-vala&quot;&gt;bar&lt;&#x2F;span&gt; { &lt;span class=&quot;z-support z-type z-vala&quot;&gt;get&lt;&#x2F;span&gt;; &lt;span class=&quot;z-support z-type z-vala&quot;&gt;set&lt;&#x2F;span&gt;; }
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-class z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;}
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-class z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-class z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-storage z-modifier z-access z-vala&quot;&gt;public&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-modifier z-vala&quot;&gt;partial&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-class z-vala&quot;&gt;&lt;span class=&quot;z-storage z-type z-class z-vala&quot;&gt;class&lt;&#x2F;span&gt; &lt;span class=&quot;z-entity z-name z-class z-vala&quot;&gt;Foo &lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-separator z-type z-vala&quot;&gt;:&lt;&#x2F;span&gt; &lt;span class=&quot;z-entity z-other z-inherited-class z-vala&quot;&gt;Initable&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-class z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-vala&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-class z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-class z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;    &lt;span class=&quot;z-storage z-modifier z-access z-vala&quot;&gt;public&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-modifier z-vala&quot;&gt;virtual&lt;&#x2F;span&gt; &lt;span class=&quot;z-storage z-type z-vala&quot;&gt;bool&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-method z-constructor z-vala&quot;&gt;&lt;span class=&quot;z-entity z-name z-function z-constructor z-vala&quot;&gt;init&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-method z-parameters z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-method z-constructor z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-parameters z-vala&quot;&gt;&lt;span class=&quot;z-support z-type z-vala&quot;&gt;Cancellable&lt;&#x2F;span&gt;&lt;span class=&quot;z-storage z-type z-nullable z-vala&quot;&gt;?&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-parameter z-vala&quot;&gt;cancellable&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-default-value z-vala&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-vala&quot;&gt;null&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-method z-parameters z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-parameters z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-begin z-vala&quot;&gt;{&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-class z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-class z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;        &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;stdout&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-variable z-function z-vala&quot;&gt;printf&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-begin z-vala&quot;&gt;(&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-string z-quoted z-double z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-begin z-vala&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;hello!&lt;span class=&quot;z-constant z-character z-escape z-vala&quot;&gt;\n&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-definition z-string z-end z-vala&quot;&gt;&amp;quot;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-function-call z-vala&quot;&gt;&lt;span class=&quot;z-meta z-group z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-group z-end z-vala&quot;&gt;)&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-statement z-vala&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-class z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-class z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;        &lt;span class=&quot;z-variable z-language z-vala&quot;&gt;this&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-accessor z-dot z-vala&quot;&gt;.&lt;&#x2F;span&gt;&lt;span class=&quot;z-variable z-other z-vala&quot;&gt;bar&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-vala&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-number z-float z-decimal z-vala&quot;&gt;&lt;span class=&quot;z-constant z-numeric z-value z-vala&quot;&gt;0&lt;&#x2F;span&gt;&lt;span class=&quot;z-constant z-numeric z-value z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-separator z-decimal z-vala&quot;&gt;.&lt;&#x2F;span&gt;56&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-statement z-vala&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-class z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-class z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;        &lt;span class=&quot;z-keyword z-control z-flow z-return z-vala&quot;&gt;return&lt;&#x2F;span&gt; &lt;span class=&quot;z-constant z-language z-vala&quot;&gt;true&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-statement z-vala&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-class z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-class z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-method z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;    &lt;span class=&quot;z-punctuation z-section z-block z-end z-vala&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-class z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-meta z-class z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-block z-end z-vala&quot;&gt;}&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-meta z-class z-body z-vala&quot;&gt;&lt;span class=&quot;z-meta z-block z-vala&quot;&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Merge Request &lt;a href=&quot;https:&#x2F;&#x2F;gitlab.gnome.org&#x2F;GNOME&#x2F;vala&#x2F;-&#x2F;merge_requests&#x2F;200&quot;&gt;#200&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;length-type-for-arrays&quot;&gt;Length-type for Arrays&lt;a class=&quot;zola-anchor&quot; href=&quot;#length-type-for-arrays&quot; aria-label=&quot;Anchor link for: length-type-for-arrays&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;The length of an array is usually specified by an 32bit integer. However in some cases, especially in bindings to other libaries, sometimes the length of an array is given by a different type of integer. We now have support for that:&lt;&#x2F;p&gt;
&lt;pre data-lang=&quot;vala&quot; class=&quot;language-vala z-code&quot;&gt;&lt;code class=&quot;language-vala&quot; data-lang=&quot;vala&quot;&gt;&lt;span class=&quot;z-source z-vala&quot;&gt;&lt;span class=&quot;z-storage z-type z-vala&quot;&gt;string&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-brackets z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-begin z-vala&quot;&gt;[&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-end z-vala&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt; &lt;span class=&quot;z-variable z-other z-vala&quot;&gt;list&lt;&#x2F;span&gt; &lt;span class=&quot;z-keyword z-operator z-assignment z-variable z-vala&quot;&gt;=&lt;&#x2F;span&gt; &lt;span class=&quot;z-meta z-instance z-vala&quot;&gt;&lt;span class=&quot;z-keyword z-operator z-new z-vala&quot;&gt;new&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-instance z-vala&quot;&gt; &lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-instance z-vala&quot;&gt;&lt;span class=&quot;z-storage z-type z-vala&quot;&gt;string&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-brackets z-vala&quot;&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-begin z-vala&quot;&gt;[&lt;&#x2F;span&gt;&lt;span class=&quot;z-meta z-number z-integer z-decimal z-vala&quot;&gt;&lt;span class=&quot;z-constant z-numeric z-value z-vala&quot;&gt;10&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;:&lt;span class=&quot;z-storage z-type z-vala&quot;&gt;uint8&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-section z-brackets z-end z-vala&quot;&gt;]&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;&#x2F;span&gt;&lt;span class=&quot;z-punctuation z-terminator z-statement z-vala&quot;&gt;;&lt;&#x2F;span&gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Issue &lt;a href=&quot;https:&#x2F;&#x2F;gitlab.gnome.org&#x2F;GNOME&#x2F;vala&#x2F;-&#x2F;issues&#x2F;607&quot;&gt;#607&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;foreach-support-on-glib-sequence-and-glib-array&quot;&gt;Foreach support on Glib.Sequence and Glib.Array&lt;a class=&quot;zola-anchor&quot; href=&quot;#foreach-support-on-glib-sequence-and-glib-array&quot; aria-label=&quot;Anchor link for: foreach-support-on-glib-sequence-and-glib-array&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;This small change will be a big improvement for users of these data structures. Instead of manually looping with for, they are now ready to be used with a foreach loop over the items in the sequence or array.&lt;&#x2F;p&gt;
&lt;p&gt;Merge Request &lt;a href=&quot;https:&#x2F;&#x2F;gitlab.gnome.org&#x2F;GNOME&#x2F;vala&#x2F;-&#x2F;merge_requests&#x2F;234&quot;&gt;#234&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;new-bindings&quot;&gt;New Bindings&lt;a class=&quot;zola-anchor&quot; href=&quot;#new-bindings&quot; aria-label=&quot;Anchor link for: new-bindings&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;A bunch of new bindings to libraries got added this release. Here is a list:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;libsoup is now also available in version 3.0 and webkit2gtk in version 4.1 and 5.0 so you can start porting you Vala apps to the new releases of these libraries&lt;&#x2F;li&gt;
&lt;li&gt;linux-media can now be used from Vala. There were also lots of more additions and fixes in other linux kernel interface bindings.&lt;&#x2F;li&gt;
&lt;li&gt;During the port of the gnome-desktop library it was splitted up into gnome-desktop-4, gnome-rr-4 and gnome-bg-4. They are all now available to use in your new app.&lt;&#x2F;li&gt;
&lt;li&gt;The GLib vapi was updated to version 2.72, including the new Signal- and BindingGroups and DebugController&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;gnome-getting-started-tutorial&quot;&gt;GNOME Getting started tutorial&lt;a class=&quot;zola-anchor&quot; href=&quot;#gnome-getting-started-tutorial&quot; aria-label=&quot;Anchor link for: gnome-getting-started-tutorial&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;The GNOME developer documentation has besides other stuff a excellent section on getting started with GTK and app development. Most of the &lt;a href=&quot;https:&#x2F;&#x2F;developer.gnome.org&#x2F;documentation&#x2F;tutorials.html&quot;&gt;tutorials&lt;&#x2F;a&gt; there have now code examples in Vala. So read it and write your first Vala application! :)&lt;&#x2F;p&gt;
&lt;h2 id=&quot;vala-flatpak-sdk-extension&quot;&gt;Vala Flatpak Sdk Extension&lt;a class=&quot;zola-anchor&quot; href=&quot;#vala-flatpak-sdk-extension&quot; aria-label=&quot;Anchor link for: vala-flatpak-sdk-extension&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;You can find on flathub now the &lt;code&gt;org.freedesktop.Sdk.Extension.vala&lt;&#x2F;code&gt; Extension. It contains the Vala compiler, language server and more tooling. You can use it either for compiling your Vala app, or if you need for example the language server at runtime, like an IDE. Instructions can be found at the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;flathub&#x2F;org.freedesktop.Sdk.Extension.vala&quot;&gt;flathub repository&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;google-summer-of-code&quot;&gt;Google Summer of Code&lt;a class=&quot;zola-anchor&quot; href=&quot;#google-summer-of-code&quot; aria-label=&quot;Anchor link for: google-summer-of-code&quot;&gt;#&lt;&#x2F;a&gt;
&lt;&#x2F;h2&gt;
&lt;p&gt;We have proposed a project idea for the Google Summer of Code for working on Vala. If you are interested, check out the &lt;a href=&quot;https:&#x2F;&#x2F;discourse.gnome.org&#x2F;t&#x2F;gsoc-2022-project-ideas&#x2F;8931#add-support-for-the-latest-gir-attributes-and-gi-docgen-formatting-to-valadoc-15&quot;&gt;project ideas page&lt;&#x2F;a&gt; on GNOME discourse.&lt;&#x2F;p&gt;
&lt;hr &#x2F;&gt;
&lt;p&gt;You are always invited to join our matrix chat &lt;a href=&quot;https:&#x2F;&#x2F;matrix.to&#x2F;#&#x2F;#_gimpnet_#vala:gnome.org&quot;&gt;#vala:gnome.org&lt;&#x2F;a&gt; and ask questions about Vala or how to contribute. Until then, have a nice time and build great apps with Vala!&lt;&#x2F;p&gt;
</content>
        
    </entry>
</feed>
